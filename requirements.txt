import streamlit as st
import pandas as pd
import numpy as np
import joblib
import matplotlib.pyplot as plt
import seaborn as sns

# Title
st.title("üî¨ Advanced Cancer Prediction System")
st.subheader("AI-Powered Diagnostic Support Tool")

# Load the trained model
try:
    model = joblib.load("cancer_model.pkl")
except FileNotFoundError:
    st.error("‚ùå Model file not found! Ensure 'cancer_model.pkl' exists.")

# Sidebar for user input
st.sidebar.header("Patient Risk Assessment")

features = ["mean radius", "mean texture", "mean perimeter", "mean area",
            "mean smoothness", "mean compactness", "mean concavity"]

user_input = [st.sidebar.slider(f, 0.0, 50.0, 10.0, 0.01) for f in features]

# Prediction function
def predict_cancer(input_data):
    prediction = model.predict([input_data])
    return "Malignant (Cancerous)" if prediction[0] == 1 else "Benign (Non-Cancerous)"

if st.sidebar.button("Predict"):
    try:
        result = predict_cancer(user_input)
        st.success(f"ü©∫ Prediction: **{result}**")
    except NameError:
        st.error("‚ùå Model not loaded. Fix the issue above.")

# Visualization Section
st.subheader("üìä Feature Distribution Analysis")

try:
    data = pd.read_csv("cancer.csv")  # Check if dataset exists
    selected_feature = st.selectbox("Select Feature", features)
    
    plt.figure(figsize=(8, 4))
    sns.histplot(data[selected_feature], kde=True, bins=30)
    plt.xlabel(selected_feature)
    plt.title(f"Distribution of {selected_feature}")
    st.pyplot(plt)
except FileNotFoundError:
    st.warning("Dataset not found. Skipping visualization.")

st.write("Made with ‚ù§Ô∏è using Streamlit")
